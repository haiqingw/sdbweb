webpackJsonp([40],{XO6B:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("gyMJ"),i=(a("ulGR"),{data:function(){return{isDownLoading:!1,isUpLoading:!1,upFinished:!1,offset:10,isData:!0,byProduct:{options:[{id:"1",label:"按产品"}],value:""},usageState:{options:[{value:"2",label:"已使用"},{value:"1",label:"未使用"}],value:""},byBatch:{options:[{id:"1",label:"按批次"}],value:""},queryData:{product:{requestType:"agent",requestKeywords:"product",platformID:this.$store.state.user.pid},batch:{requestType:"agent",requestKeywords:"batchnolist",platformID:this.$store.state.user.pid,userID:this.$store.state.user.uid,userPhone:this.$store.state.user.uphone},list:{requestType:"agent",requestKeywords:"terminal",platformID:this.$store.state.user.pid,userID:this.$store.state.user.uid,userPhone:this.$store.state.user.uphone,page:0,limit:10}},renderData:{list:[],oldList:[]}}},methods:{byProductChange:function(){this.queryData.list.productID=this.byProduct.value,this.renderData.oldList=[],this.queryData.list.page=0,this.onLoadList()},usageStateChange:function(){this.queryData.list.useStatus=this.usageState.value,this.renderData.oldList=[],this.queryData.list.page=0,this.onLoadList()},byBatchChange:function(){this.queryData.list.batchNo=this.byBatch.value,this.renderData.oldList=[],this.queryData.list.page=0,this.onLoadList()},choiceProduct:function(){var t=this;Object(s.a)(this.queryData.product).then(function(e){1===e.data.responseStatus&&(t.byProduct.options=e.data.data)})},choiceBatch:function(){var t=this;Object(s.a)(this.queryData.batch).then(function(e){1===e.data.responseStatus&&(t.byBatch.options=e.data.data)})},terminalList:function(){var t=this;this.upFinished=!1,Object(s.a)(this.queryData.list).then(function(e){1===e.data.responseStatus?(t.isData=!0,t.renderData.list=e.data.data,t.renderData.list.forEach(function(e){t.renderData.oldList.push(e)}),t.isDownLoading=!1,t.isUpLoading=!1):300===e.data.responseStatus&&1!==t.queryData.list.page?(t.upFinished=!0,t.isUpLoading=!1):300===e.data.responseStatus&&1===t.queryData.list.page&&(t.upFinished=!1,t.isUpLoading=!1,t.isData=!1)})},onLoadList:function(){this.queryData.list.page++,this.isUpLoading=!0,this.terminalList()},onDownRefresh:function(){this.queryData.list.page=1,this.renderData.oldList=[],this.isDownLoading=!0,this.terminalList()}},created:function(){this.choiceProduct(),this.choiceBatch()}}),n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-terminal"},[s("div",{staticClass:"return"},[s("img",{attrs:{src:a("1Hd4"),alt:""},on:{click:function(e){return t.$router.go(-1)}}}),t._v(" "),s("span",[t._v("我的终端")])]),t._v(" "),s("div",{staticClass:"my-terminal-choice line_bottom"},[s("el-select",{attrs:{placeholder:"按产品"},on:{change:t.byProductChange},model:{value:t.byProduct.value,callback:function(e){t.$set(t.byProduct,"value",e)},expression:"byProduct.value"}},t._l(t.byProduct.options,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),s("el-select",{attrs:{placeholder:"使用状态"},on:{change:t.usageStateChange},model:{value:t.usageState.value,callback:function(e){t.$set(t.usageState,"value",e)},expression:"usageState.value"}},t._l(t.usageState.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),s("el-select",{attrs:{placeholder:"按批次"},on:{change:t.byBatchChange},model:{value:t.byBatch.value,callback:function(e){t.$set(t.byBatch,"value",e)},expression:"byBatch.value"}},t._l(t.byBatch.options,function(t){return s("el-option",{key:t.batchNo,attrs:{label:t.batchNo,value:t.batchNo}})}),1)],1),t._v(" "),t.isData?s("div",{staticClass:"my-terminal-list"},[s("van-pull-refresh",{on:{refresh:t.onDownRefresh},model:{value:t.isDownLoading,callback:function(e){t.isDownLoading=e},expression:"isDownLoading"}},[s("van-list",{attrs:{finished:t.upFinished,"finished-text":"没有更多了",offset:t.offset},on:{load:t.onLoadList},model:{value:t.isUpLoading,callback:function(e){t.isUpLoading=e},expression:"isUpLoading"}},[s("ul",t._l(t.renderData.oldList,function(e){return s("li",{key:e.id},[s("div",{staticClass:"name-state"},[s("h3",[t._v(t._s(e.productName))]),t._v(" "),"未使用"===e.useStatus?s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.useStatus))]):t._e(),t._v(" "),"已使用"===e.useStatus?s("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.useStatus))]):t._e()],1),t._v(" "),s("div",{staticClass:"terminal-number"},[t._v("\n                            "+t._s(e.terminalNo)+"\n                        ")]),t._v(" "),s("div",{staticClass:"time-batch"},[s("time",[t._v(t._s(e.allotTime))]),t._v(" "),s("span",[t._v(t._s(e.batchNo))])])])}),0)])],1)],1):s("div",{staticClass:"no-data"},[s("img",{attrs:{src:a("dotK"),alt:""}})])])},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(t){a("d4sf")},null,null);e.default=o.exports},d4sf:function(t,e){}});
//# sourceMappingURL=40.351b072e5436803abc3c.js.map